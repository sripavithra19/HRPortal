<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="fragments/header :: head('User Profile')">
</head>
<body>
  <div th:replace="fragments/header :: complete-header('User Profile')"></div>

    
    <main class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h4 class="card-title mb-0">User Profile</h4>
                    </div>
                    <div class="card-body">
                        <!-- Welcome Message -->
                        <div class="text-center mb-4">
                            <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                                 style="width: 80px; height: 80px; font-size: 2rem;">
                                ðŸ‘¤
                            </div>
                            <h3 class="mt-3" th:text="'Welcome, ' + ${(user != null ? user.fullName : 'User')} + '!'">
                                Welcome, User!
                            </h3>
                        </div>

                        <!-- User Information Table -->
                        <div class="table-responsive">
                            <table class="table table-borderless">
                                <tbody>
                                    <tr>
                                        <th width="30%">Full Name:</th>
                                        <td th:text="${user != null ? user.fullName : 'N/A'}">John Doe</td>
                                    </tr>
                                    <tr>
                                        <th>Email:</th>
                                        <td>
                                            <a th:href="${user != null ? 'mailto:' + user.email : '#'}" 
                                               th:text="${user != null ? user.email : 'N/A'}">
                                                john.doe@example.com
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Username:</th>
                                        <td th:text="${user != null ? user.preferredUsername : 'N/A'}">johndoe</td>
                                    </tr>
                                    <tr>
                                        <th>Email Verified:</th>
                                        <td>
                                            <span th:if="${user != null and user.emailVerified}" class="badge bg-success">Yes</span>
                                            <span th:if="${user != null and not user.emailVerified}" class="badge bg-warning">No</span>
                                            <span th:if="${user == null}" class="badge bg-secondary">N/A</span>
                                        </td>
                                    </tr>
                                    <tr th:if="${user != null}">
                                        <th>Subject ID:</th>
                                        <td><small class="text-muted" th:text="${user.subject}">sub_123456789</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-grid gap-2 d-md-flex justify-content-center mt-4">
                           <!--  <a th:href="@{/client/employees}" class="btn btn-primary me-md-2">
                                View Employees
                            </a> -->
                            <a th:href="@{/index}" class="btn btn-primary me-md-2">
                                Go Home
                            </a>
                            <a th:href="@{/logout}" class="btn btn-primary me-md-2">
                                Logout
                            </a>
                        </div>

                        <!-- Debug Section -->
                        <div th:if="${user != null}" class="mt-4">
                            <button class="btn btn-sm btn-outline-info w-100" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#debugInfo" 
                                    aria-expanded="false" aria-controls="debugInfo">
                                Show Advanced Details
                            </button>
                            <div class="collapse mt-2" id="debugInfo">
                                <div class="card card-body">
                                    <h6 class="text-muted">User Attributes:</h6>
                                    <pre class="bg-light p-3 rounded small" th:text="${#strings.toString(user.attributes)}">
                                        User attributes will be displayed here
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <div th:replace="fragments/footer :: footer"></div>

    <style>
        .card {
            border-radius: 10px;
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
        }
        
        .badge {
            font-size: 0.85em;
        }
        
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.8rem;
        }
    </style>
</body>
</html>