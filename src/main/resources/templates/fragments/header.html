<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head(title)">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${title} + ' - HR Portal'">Ciberspring HR Portal</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">

<!-- Bootstrap Icons -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
	rel="stylesheet">

<!-- Tabulator CSS -->
<link
	href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css"
	rel="stylesheet">

<!-- Custom CSS -->
<link rel="stylesheet" th:href="@{/css/style.css}">
<style>
.nav-icon {
	font-size: 1.2rem;
	margin-right: 0.5rem;
	color: #5f6368;
}

.dropdown-menu {
	border-radius: 8px;
	box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
	border: none;
	padding: 0.5rem;
}

.dropdown-item {
	padding: 0.6rem 1rem;
	border-radius: 6px;
	margin: 0.2rem;
	transition: all 0.2s ease;
}

.dropdown-item:hover {
	background-color: #e9ecef;
}

.profile-icon {
	color: #5f6368;
	font-size: 1.8rem;
}
</style>
</head>
<body>
	<!-- Complete header with navigation -->
	<header th:fragment="complete-header(title)">
		<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
			<div class="container">
				<!-- Brand -->
				<a class="navbar-brand" th:href="@{/home}">Ciberspring HR Portal</a>

				<!-- Right-aligned items -->
				<ul class="navbar-nav ms-auto d-flex align-items-center flex-row">
					<!-- HR Access Dropdown -->
					<li class="nav-item dropdown me-3" th:if="${isHRUser}"><a
						class="nav-link dropdown-toggle d-flex align-items-center"
						href="#" id="hrDropdown" role="button" data-bs-toggle="dropdown"
						aria-expanded="false"> <i class="bi bi-people-fill nav-icon"></i>
							HR Access
					</a>
						<ul class="dropdown-menu dropdown-menu-end shadow"
							aria-labelledby="hrDropdown">
							<li><a class="dropdown-item"
								th:href="@{/client/add-employee}"> <i
									class="bi bi-person-plus"></i> Add New Employee
							</a></li>
							<li><a class="dropdown-item" th:href="@{/client/employees}">
									<i class="bi bi-list-ul"></i> View Employees
							</a></li>
							<li><a class="dropdown-item"
								th:href="@{/client/AllLeaveBalance}"> <i
									class="bi bi-calendar-check"></i> All Employees Leaves
							</a></li>
						</ul></li>

					<!-- Self Access Dropdown - Visible to all authenticated users -->
					<li class="nav-item dropdown me-3"><a
						class="nav-link dropdown-toggle d-flex align-items-center"
						href="#" id="selfDropdown" role="button" data-bs-toggle="dropdown"
						aria-expanded="false"> <i
							class="bi bi-person-check-fill nav-icon"></i> Self Access
					</a>
						<ul class="dropdown-menu dropdown-menu-end shadow"
							aria-labelledby="selfDropdown">
							<li><a class="dropdown-item"
								th:href="@{http://localhost:8085/personal/details}"
								target="_blank"> <i class="bi bi-person-lines-fill"></i>
									Personal Details
							</a></li>
							<li><a class="dropdown-item"
								th:href="@{/client/localholidaylist}"> <i
									class="bi bi-calendar-event"></i> Local Holidays List
							</a></li>
							<li><a class="dropdown-item" th:href="@{/client/myleaves}">
									<i class="bi bi-clock-history"></i> My Leaves
							</a></li>
						</ul></li>

					<!-- Profile Dropdown -->
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle d-flex align-items-center"
						href="#" id="profileDropdown" role="button"
						data-bs-toggle="dropdown" aria-expanded="false"> <i
							class="bi bi-person-circle profile-icon"></i>
					</a>
						<ul class="dropdown-menu dropdown-menu-end shadow"
							aria-labelledby="profileDropdown" style="min-width: 300px;">
							<!-- User Info Header -->
							<li class="dropdown-header text-center"><strong
								th:text="${user.fullName}">User Name</strong><br> <small
								th:text="${user.email}">user@example.com</small></li>
							<li><hr class="dropdown-divider"></li>

							<!-- Extra Details -->
							<li class="px-3">
								<p class="mb-1">
									<strong>Username:</strong> <span
										th:text="${user.preferredUsername}">johndoe</span>
								</p>
								<p class="mb-1">
									<strong>Email Verified:</strong> <span
										th:if="${user.emailVerified}" class="badge bg-success">Yes</span>
									<span th:if="${!user.emailVerified}" class="badge bg-warning">No</span>
								</p>
							</li>

							<li><hr class="dropdown-divider"></li>

							<!-- Actions -->
							<li>
								<form th:action="@{/logout}" method="post" class="d-inline">
									<!-- CSRF TOKEN REMOVED - CSRF IS DISABLED -->
									<button type="submit" class="dropdown-item">
										<i class="bi bi-box-arrow-right"></i> Logout
									</button>
								</form>
							</li>
						</ul></li>
				</ul>
			</div>
		</nav>
	</header>

	<!-- Bootstrap Bundle with Popper -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>